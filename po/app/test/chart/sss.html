<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style type="text/css">
  
    .node {
    cursor: pointer;
  }

  .overlay{
      background-color:#EEE;
  }
   
  .node circle {
    fill: #fff;
    stroke: steelblue;
    stroke-width: 1.5px;
  }
   
  .node text {
    font-size:10px; 
    font-family:sans-serif;
  }
   
  .link {
    fill: none;
    stroke: #ccc;
    stroke-width: 1.5px;
  }

  .templink {
    fill: none;
    stroke: red;
    stroke-width: 3px;
  }

  .ghostCircle.show{
      display:block;
  }

  .ghostCircle, .activeDrag .ghostCircle{
       display: none;
  }
  
.edit-branch-member {
    width: 250px;
    height: 450px;
    background: white;
    box-shadow: 0 0 15px;
    position: absolute;
    border-radius:10px;
    display:none;
 }
 
.edit-bm-branch {
    display: flex;
    background: #e1e1e1;
    height: 55px;
    border-bottom: 1px solid;
    border-radius: 8px 8px 0 0;
}

.edit-bm-branch-img {
    flex: 3;
}

.edit-bm-branch-img div,.edit-bm-list-img div {
    width:40px;
    height: 40px;
    background: gray;
    margin: 7px;
    text-align: center;
    line-height: 40px;
    border-radius: 10px;
    color: white;
    font-size: 15px;
}

.edit-bm-branch-name {
    flex: 10;
}

.edit-bm-branch-name div {
    width: 80%;
    height: 35px;
    background: white;
    border: 1px solid #d2d2d2;
    margin: 7px;
    border-radius: 8px;
    line-height: 35px;
    overflow-x: scroll;
}

.edit-bm-list {
    display: flex;
    border-bottom: 1px solid;
    height:55px;
}

.edit-bm-list-chk {
    flex: 4;
}

.edit-bm-list-chk div {
    width: 20px;
    height: 20px;
    border: 1px solid #a1a1a1;
    background: white;
    border-radius: 20px;
    margin: 17px 12px;
}

.edit-bm-list-chk div.edit-tick {
    background: url(tick.png);
    background-size: cover;
}

.edit-bm-list-chk div.edit-cancel {
    background: url(cancel.png);
    background-size: cover;
}

.edit-bm-list-area-all .edit-bm-list .edit-bm-list-chk div.edit-chk-pic {
    background: url(tick.png);
    background-size: cover;
}

.edit-bm-list-area .edit-bm-list .edit-bm-list-chk div.edit-chk-pic {
    background: url(cancel.png);
    background-size: cover;
}

.edit-bm-list-img {
    flex: 5;
}

.edit-bm-list-content {
    flex: 12;
    padding: 5px;
}

.edit-bm-list-area,.edit-bm-list-area-all {
    overflow: scroll;
    height: 300px;
}

.edit-bm-list-area-all {
    display:none;
}

.edit-bm-branch-cancel {
    width: 30px;
    height: 30px;
    margin: 11px 8px 0 0;
    cursor: pointer;
}

.edit-bm-branch-cancel:active {
    position:relative;
    top:1px;
    left:1px;
}

.edit-bm-branch-name input {
    height: 30px;
    width: 130px;
    margin: 9px;
    border-radius: 5px;
    border: 1px solid;
    border-color: #a1a1a1;
    font-size: 16px;
}

.edit-bm-branch-name input:focus{
    outline:none;
}

.edit-bm-classify {
    display: flex;
    border-bottom: 1px solid;
    height: 50px;
}

.edit-bm-classify-box {
    flex: 5;
    text-align: center;
    line-height: 50px;
    border-bottom: 8px solid white;
    color: rgb(50,150,250);
    cursor:pointer;
}

.edit-bm-classify-box-blue {
    border-bottom-color: rgb(50,150,250);
}

.edit-bm-bottom {
    position: fixed;
    bottom: 0;
    display: flex;
    background: rgb(50,150,250);
    height: 45px;
    width:100%;
    border-radius: 0 0 8px 8px;
    color: white;
    cursor:pointer;
}

.edit-bm-bottom-save,.edit-bm-bottom-cancel {
    flex: 5;
    text-align: center;
    line-height: 45px;
}

.edit-bm-bottom-cancel {
    border-right: 1px solid rgb(80,160,240);
}

.edit-bm-bottom-save:active,.edit-bm-bottom-cancel:active {
    position:relative;
    top:1px;
    left:1px;
    background:rgb(70,170,255);
}
/* ======================= popup =================================*/
.popup{
    display: none;
}

.popup-frame{
    position:fixed;
    z-index:10;
    background: white;
    box-shadow: 0 0px 10px 5px #a5a5a5;
    border-radius: 10px;
    padding: 15px;
    top: 200px;
    text-align:center;
}

.popup-screen {
    z-index:9;
    display: none;
    position: fixed;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
}

.popup-close,.popup-close-cancel {
    margin: 0 10px;
    margin-top: 20px;
    display: inline-block;
    box-shadow: 0 1px 5px #000;
    height: 35px;
    width: 70px;
    text-align: center;
    line-height: 35px;
    border-radius: 2px;
    text-decoration: blink;
    color: black;
}

.popup-close:hover {
    background: #f9f9f9;
}

.side-menu-btn{
    /* flex: 4; */
    float: left;
    cursor:pointer;
    width: 40px;
    position: relative;
    left: 7px;
    top: 2px;
}

#page-group-main .ui-content {
    padding: 0;
}

</style>
<script src="jquery.js"></script>
<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<script src="d3.v3.min.js"></script>
<script src="dndTree_test.js"></script>
<script>
$(function() {
      
    member_arr = [["張桓瑞","主任","APP應用事業群/APP技術部"],["林慶安","工程師","APP應用事業群/APP技術部"],["李運彬","工程師","APP應用事業群/APP技術部"],["李慧茹","工程師","APP應用事業群/APP技術部"],["謝婕妤","主任","APP應用事業群/APP業務部"],["鄭雅倫","經理","財會部"],["石國建","工程師","金融服務事業群/系統維運部/MIS群組"],["朱少英","主任","APP應用事業群/APP專案部"],["吳年傑","工程師","離職員工"],["蔡閔弘","工程師","APP應用事業群/APP技術部"],["徐維淩","主任","金融服務事業群/金融產規部"],["鄭又欽","工程師","金融服務事業群/系統維運部/機房群組"],["賴郁涵","工程師","金融服務事業群/金融產規部/QC群組"],["吳振銘","工程師","APP應用事業群/APP技術部"],["林進鴻","工程師","離職員工"],["賴致仁","工程師","APP應用事業群/APP技術部"],["李國駿","工程師","APP應用事業群/APP技術部"],["黃佳榮","工程師","金融服務事業群/金融產規部/QC群組"],["馮啟豪","工程師","APP應用事業群/APP專案部"],["蕭婉伶","工程師","APP應用事業群/APP專案部"],["洪士倫","工程師","離職員工"],["吳小秋","工程師","APP應用事業群/APP專案部"],["王順興","工程師","APP應用事業群/APP技術部"],["郭俊佑","工程師","APP應用事業群/APP技術部"],["郭柏暉","工程師","金融服務事業群/金融研發本部"],["陳明義","工程師","金融服務事業群/金融研發一部"],["李侃縣","主任","金融服務事業群/金融研發本部"],["李明鴻","客服專員","金融服務事業群/金融產規部/客服群組"],["李昆達","工程師","APP應用事業群/APP技術部"],["曾威智","業務專員","企業簡訊事業群/簡訊業務部"],["楊心瑜","助理工程師","金融服務事業群/金融研發一部"],["張正芳","工程師","APP應用事業群/APP技術部"],["牟信安","經理","離職員工"],["?振丞","工程師","企業簡訊事業群/簡訊研發部"],["高以任","工程師","金融服務事業群/金融研發二部"],["吳家彥","工程師","金融服務事業群/金融研發三部"],["高弘明","主任","APP應用事業群/APP專案部"],["范姜士威","工程師","金融服務事業群/金融研發一部"],["何嘉騏","工程師","APP應用事業群/APP技術部"],["黃子秦","助理","金融服務事業群/系統維運部"],["尤俊雄","經理","企業簡訊事業群/簡訊業務部"],["陳萩憶","行銷專員","策略行銷部"],["廖于瑩","專員","財會部"],["洪婉萍","專員","管理部"],["郭凱迪","主任","離職員工"],["何智群","工程師","金融服務事業群/系統維運部/機房群組"],["陳怡君","專員","財會部"],["吳炅儒","工程師","金融服務事業群/金融研發二部"],["巫明侃","工程師","金融服務事業群/金融研發二部"],["簡訊維運群組","簡訊維運群組","企業簡訊事業群/簡訊研發部"],["周曉吟","助理","金融服務事業群/金融業務部"],["王仕霖","工程師","企業簡訊事業群/簡訊研發部"],["楊佩芬","客服專員","金融服務事業群/金融產規部/客服群組"],["楊澤富","工程師","金融服務事業群/金融產規部"],["邱柏淳","工程師","金融服務事業群/金融軟體部"],["卜正偉","副理","APP應用事業群/APP專案部"],["許振唯","工程師","APP應用事業群/APP技術部"],["蘇文賢","工程師","APP應用事業群/APP技術部"],["黃翔邦","工程師","APP應用事業群/APP技術部"],["莊承祐","業務專員","企業簡訊事業群/簡訊業務部"],["曹明哲","協理","APP應用事業群/APP專案部"],["張秦綺","業務專員","離職員工"],["李清松","經理","總經理室"],["吳育霆","經理","企業簡訊事業群/簡訊研發部"],["盧盈君","工程師","金融服務事業群/金融研發三部"],["繆翔","工程師","企業簡訊事業群/簡訊研發部"],["陳?杰","主任","企業簡訊事業群/簡訊研發部"],["葉恒嘉","工程師","APP應用事業群/APP技術部"],["郭仲凱","工程師","金融服務事業群/金融研發一部"],["余幸潔","工程師","離職員工"],["蔡宇婷","業務專員","企業簡訊事業群/簡訊業務部"],["林逸珊","工程師","APP應用事業群/APP技術部"],["鄭乃瑜","助理","企業簡訊事業群/簡訊業務部"],["袁若鈞","工程師","雲端服務事業群/雲端平台應用開發部"],["阮冠儒","經理","離職員工"],["李昀潔","經理","雲端服務事業群/雲端產品發展部"],["李俊霖","工程師","金融服務事業群/金融產規部"],["謝旭諺","工程師","金融服務事業群/金融研發二部"],["劉宜鑫","工程師","金融服務事業群/金融研發二部"],["籃珮菱","主任","APP應用事業群/APP專案部"],["莊仁銘","業務專員","離職員工"],["俞又文","客服專員","金融服務事業群/金融產規部/客服群組"],["粘智強","顧問","雲端服務事業群/雲端核心技術研發部"],["沈勃甫","顧問","雲端服務事業群/雲端平台應用開發部"],["陳昭宇","顧問","雲端服務事業群/雲端核心技術研發部"],["郭守立","顧問","雲端服務事業群/雲端核心技術研發部"],["許淑瑞","業務專員","APP應用事業群/APP業務部"],["洪薪惠","主任","APP應用事業群/APP專案部"],["涂筱瑋","技術專員","雲端服務事業群/雲端系統服務技術部"],["周幸樺","工程師","金融服務事業群/金融產規部/QC群組"],["黃詩涵","助理","APP應用事業群/APP業務部"],["楊宗瑜","工程師","雲端服務事業群/雲端平台應用開發部"],["吳毓臻","客服專員","金融服務事業群/金融產規部/客服群組"],["郭妍蓁","客服專員","離職員工"],["蔡?萱","客服專員","金融服務事業群/金融產規部/客服群組"],["陳柏偉","工程師","APP應用事業群/APP技術部"],["陳群元","工程師","APP應用事業群/APP技術部"],["劉冠宏","主任","離職員工"],["曾宇田","工程師","雲端服務事業群/雲端平台應用開發部"],["陳佳宏","工程師","離職員工"],["陳詩禮","工程師","雲端服務事業群/雲端平台應用開發部"],["林韋辰","工程師","APP應用事業群/APP技術部"],["吳念齊","主任","離職員工"],["林均翰","企劃專員","雲端服務事業群/雲端產品發展部"],["趙紫婕","主任","APP應用事業群/APP專案部"],["吳仁弘","工程師","雲端服務事業群/雲端平台應用開發部"],["陳御華","技術專員","雲端服務事業群/雲端平台應用開發部"],["曾文祈","企劃專員","雲端服務事業群/雲端產品發展部"],["林佳慧","行銷專員","策略行銷部"],["李希強","主任","APP應用事業群/APP技術部"],["黃郁期","業務專員","金融服務事業群/金融業務部"],["吳孟芹","業務專員","企業簡訊事業群/簡訊業務部"],["陳柏言","工程師","雲端服務事業群/雲端平台應用開發部"],["曾玉文","主任","企業簡訊事業群/簡訊業務部"],["葉長泰","工程師","APP應用事業群/APP技術部"],["牟世傑","工程師","APP應用事業群/APP技術部"],["周迪","工程師","APP應用事業群/APP技術部"],["蘇偉德","工程師","雲端服務事業群/雲端核心技術研發部"],["劉宜惠","企劃專員","雲端服務事業群/雲端產品發展部"],["簡聖霖","經理","APP應用事業群/APP產品部"],["朱恩廷","工程師","金融服務事業群/金融研發二部"],["林駿逸","主任","APP應用事業群/APP專案部"],["張慧文","工程師","APP應用事業群/APP專案部"],["王英哲","工程師","金融服務事業群/系統維運部/MIS群組"],["謝博伶","顧問","雲端服務事業群/雲端核心技術研發部"],["史諾曼","顧問","雲端服務事業群/雲端核心技術研發部"],["王瓊善","工程師","金融服務事業群/金融產規部/QC群組"],["陳延昕","工程師","金融服務事業群/金融產規部"],["呂志倫","工程師","金融服務事業群/金融研發一部"],["黃議德","主任","企業簡訊事業群/簡訊業務部"],["張育能","專員","總經理室"],["朱尚禮","工程師","APP應用事業群/APP技術部"],["簡玉雯","助理","企業簡訊事業群/簡訊業務部"],["王筱蓉","助理","APP應用事業群/APP專案部"],["黃士瑋","工程師","金融服務事業群/金融研發二部"]] ;
    var hierachy_arr = {"name":"三竹資訊","hid":0,"children":[{"name":"金融服務事業群","children":[{"name":"系統維運部","children":[{"name":"MIS群組"},{"name":"機房群組"}]},{"name":"金融產規部","children":[{"name":"客服群組"},{"name":"QC群組"}]},{"name":"金融軟體部"},{"name":"金融研發一部"},{"name":"金融研發三部"},{"name":"金融研發二部"},{"name":"金融研發本部"},{"name":"金融業務部"}]},{"name":"管理部"},{"name":"企業簡訊事業群","children":[{"name":"簡訊研發部"},{"name":"簡訊業務部"}]},{"name":"財會部"},{"name":"策略行銷部"},{"name":"雲端服務事業群","children":[{"name":"雲端核心技術研發部"},{"name":"雲端平台應用開發部"},{"name":"雲端產品發展部"},{"name":"雲端系統服務技術部"}]},{"name":"APP應用事業群","children":[{"name":"APP技術部"},{"name":"APP專案部"},{"name":"APP業務部"},{"name":"APP產品部"}]},{"name":"離職員工"},{"name":"副總經理室"},{"name":"總經理室"}]};
    
    visitEachToAddId(hierachy_arr.children);
    
    
    function visitEachToAddId(arr,hid,branch_path){
        this_hid = hid;
        $.each(arr,function(i,val){
            if(hid && branch_path){
                val.hid = hid+"-"+(i+1);
                val.branch_path = branch_path+"/"+val.name;
            }else{
                val.hid = i+1;
                val.branch_path = val.name;
            }
            
            //更新成員所屬部門
            $.each(member_arr,function(mem_i,mem_val){
                if(mem_val[2] == val.branch_path){
                    mem_val[3] = val.hid;
                    mem_val["id"] = mem_i+1;
                }
            });
            
            if(val.children){
                visitEachToAddId(val.children,val.hid,val.branch_path);
            }
        });
    }
    
    
    var queue = [];
    
    treeMake(hierachy_arr,queue);
    
    

    var scale_out_cnt = 8;
    $(document).on("click",function(){
        $(".edit-branch-member").hide();
    });
    
    $(document).on("click",".edit-branch-member",function(e){
        e.stopPropagation();
    });
    
    
    $("#undo").click(function(){
        if($("#undo-cnt").val() > 0){
            $("#tree-container").html("");
            treeMake(queue[$("#undo-cnt").val()-1],queue,$("#undo-cnt").val()-1);
            $("#undo-cnt").val($("#undo-cnt").val()-1);
        }else{
            console.log("最舊");
        }
    });
    
    $("#redo").click(function(){
        if(queue[$("#undo-cnt").val()*1+1]){
            $("#tree-container").html("");
            treeMake(queue[$("#undo-cnt").val()*1+1],queue,$("#undo-cnt").val()*1+1);
            $("#undo-cnt").val($("#undo-cnt").val()*1+1);
        }else{
            console.log("最新");
        }
    });
    
    $( ".edit-branch-member" ).draggable();
    
    $(".edit-bm-branch-cancel").click(function(){
        $(".edit-branch-member").hide();
    });
    
    $(document).on("click","circle",function(e){
        
        branch_name = $(this).parent().find("text").html();
        hid = $(this)[0].attributes.hid.value;
        if($(this)[0].attributes[0].value == "add"){
            e.stopPropagation();
            //成員視窗的左右位置調整
            x = memberListAdj($(this).offset().left);
            $(".edit-branch-member").css("top",($(document).height() - $(".edit-branch-member").height())/2);
            $(".edit-branch-member").css("left",x);
            $(".edit-branch-member").show();
            
            scaleIn($(".edit-branch-member"),8);
            
            branch_member = [];
            $.each(member_arr,function(i,val){
                if(val[3] == hid){
                    branch_member.push(val);
                }
            });
            
            //成員名單 編輯
            branch_member = branch_member;
            
            $(".edit-bm-classify-box[data-bm-class=all]").removeClass("edit-bm-classify-box-blue");
            $(".edit-bm-classify-box[data-bm-class=this]").addClass("edit-bm-classify-box-blue");
            
            $(".edit-bm-branch-name input").val(branch_name);
            $(".edit-bm-list-area").html("");
            
            memberListMake(branch_member,$(".edit-bm-list-area"));
            memberListMake(member_arr,$(".edit-bm-list-area-all"));
            $(".edit-bm-list-area-all").find(".edit-bm-list-chk div").removeClass("edit-chk-pic");
            $(".edit-bm-list-area-all").hide();
            
            $(".edit-bm-classify-box[data-bm-class=this] span").html(branch_member.length);
            $(".edit-bm-classify-box[data-bm-class=all] span").html(member_arr.length);
            
        }else{
            popupShowAdjust("確定刪除",true);
            popupConfirmDel(hierachy_arr,hid);
        }
    });
    
    
    //勾選成員
    $(document).on("click",".edit-bm-list-chk",function(){
        
        //群組成員 點選刪除
        var this_memid = $(this).parent().data("member-id");
        
        //判斷是群組或是所有成員
        if($(this).parent().parent().hasClass("edit-bm-list-area")){
            $.each(branch_member,function(i,val){
                if(val["id"] == this_memid){
                    branch_member.splice(i,1);
                    return false;
                }
            });
            $(this).parent().remove();
        }else{
            if($(this).find("div").hasClass("edit-chk-pic")){
                $.each(branch_member,function(i,val){
                    if(val["id"] == this_memid){
                        branch_member.splice(i,1);
                        return false;
                    }
                });
                
                //刪除隔壁 群組成員的這個人
                $.each($(".edit-bm-list-area .edit-bm-list"),function(i,val){
                    if($(this).data("member-id") == this_memid){
                        $(this).parent().remove();
                    }
                });
                
            }else{
                $.each(member_arr,function(i,val){
                    if(val["id"] == this_memid){
                        branch_member.push(val);
                        return false;
                    }
                });
            }
        }
        console.log(branch_member);
        $(".edit-bm-classify-box[data-bm-class=this] span").html(branch_member.length);
        
        if($(this).find("div").hasClass("edit-chk-pic")){
            $(this).find("div").removeClass("edit-chk-pic");
        }else{
            $(this).find("div").addClass("edit-chk-pic");
        }
    });
    
    //群組成員 所有成員 切換
    $(".edit-bm-classify-box").click(function(){

        $(".edit-bm-classify-box").removeClass("edit-bm-classify-box-blue");
        $(this).addClass("edit-bm-classify-box-blue");
        
        $(".edit-bm-list-area").hide();
        $(".edit-bm-list-area-all").hide();
        if($(this).data("bm-class") == "all"){
            $(".edit-bm-list-area-all").show();
            
            //存在此群組的成員 打勾
            $(".edit-bm-list-area-all").find(".edit-bm-list-chk div").removeClass("edit-chk-pic");
            $.each($(".edit-bm-list-area-all .edit-bm-list"),function(i,val){
                var this_member = $(this);
                $.each(branch_member,function(bran_i,bran_val){
                    if(bran_val["id"] == this_member.data("member-id")){
                        this_member.find(".edit-bm-list-chk div").addClass("edit-chk-pic");
                    }
                });
            });
            
        }else{
            memberListMake(branch_member,$(".edit-bm-list-area"));
            $(".edit-bm-list-area").show();
        }
    });
    
    function memberListMake(arr,target){
        target.html("");
        target.show();
        $.each(arr,function(i,val){
            target.append(
                '<div class="edit-bm-list" data-member-id="' + val["id"] + '">'+
                    '<div class="edit-bm-list-chk"><div class="edit-chk-pic"></div></div>'+
                    '<div class="edit-bm-list-img"><div>照片</div></div>'+
                    '<div class="edit-bm-list-content"><div>'+val[0]+'</div><div>'+val[1]+'</div></div>'+
                    '<input type="hidden">' +
                '</div>'
            );
        });
    }
    
    
    //成員視窗的左右位置調整
    function memberListAdj(x){
        document_width = $(document).width();
        list_width = $(".edit-branch-member").width();
        
        if(x+list_width+50  > document_width && document_width > list_width*3){
            return x-list_width-40;
        }
        return x+40;
    }
    
//----------------------- popup --------------------------------------  
    
    $(".popup-screen").click(function(){
        $(".popup").hide();
        $(".popup-screen").hide();
    });

    $(".popup-close").click(function(){
        $(".popup-screen").trigger("click");
        $(".popup-close").trigger("pageChange");
        $(".popup-close").trigger("memberDelete");
    });
    
    $(".popup-close-cancel").click(function(){
        $(".popup-screen").trigger("click");
    });
    
    //計算彈出對話框置中
    function popupShowAdjust(desc,cancel){
        if(!cancel){
            $(".popup-close-cancel").hide();
        }
        $(".popup-frame").css("margin-left",0);
        if(desc){
            $('.popup-text').html(desc);
        }
        $(".popup-screen").show();
        $(".popup").show();
        $(".popup-frame").css("margin-left",($(document).width() - $(".popup-frame").width())/2-15);
    }

    //確認刪除
    function popupConfirmDel(hierachy_arr,hid){
        $(".popup-close").bind("memberDelete",function(){
            deleteNode(hierachy_arr,hid);
            $("#tree-container").html("");
            treeMake(hierachy_arr,queue);
            $(".popup-close").unbind("memberDelete");
        });
    }
    
    function deleteNode(arr,hid){
        $.each(arr.children,function(i,val){
            
            if(val.hid == hid){
                arr.children.splice(i,1);
                return false;
            }else{
                if(val.children){
                    deleteNode(val,hid);   
                }
            }            
                
            
        });
    }
    
    function scaleIn(target,scale_out_cnt)
    {
        target.css("transform","scale("+(scale_out_cnt/100)+")");
        if(scale_out_cnt < 100){
            scale_out_cnt+=4;
            setTimeout(function(){
                scaleIn(target,scale_out_cnt);
            }, 1);
        }
    }
    
    
    
});
</script>
</head>
<body>
    <button id="undo">上一步</button>
    <button id="redo">下一步</button>
    <div id="tree-container" style=""></div>
    <div class="edit-branch-member">
        <div class="edit-bm-branch">
            <div class="edit-bm-branch-img"><div>照片</div></div>
            <div class="edit-bm-branch-name"><input type="text" data-role="none"/></div>
            <img class="edit-bm-branch-cancel" src="x.png"/>
        </div>
        <div class="edit-bm-classify">
            <div data-bm-class="this" class="edit-bm-classify-box edit-bm-classify-box-blue">群組成員(<span></span>)</div>
            <div data-bm-class="all" class="edit-bm-classify-box">所有成員(<span></span>)</div>
        </div>
        <div class="edit-bm-list-area"></div>
        <div class="edit-bm-list-area-all"></div>
        <div class="edit-bm-bottom">
            <div class="edit-bm-bottom-cancel">取消</div>
            <div class="edit-bm-bottom-save">儲存</div>
        </div>
    </div>
    <input id="undo-cnt" type="hidden" value="-1"/>
    
    <div class="popup">
          <div class="popup-frame">
          <div class="popup-text"></div>
          <a href="#" class="popup-close" data-role="button" data-inline="true">確定</a>
          <a href="#" class="popup-close-cancel" data-role="button" data-inline="true">取消</a>
          </div>
          <div class="popup-screen"></div>
        </div>
</body>
</html>