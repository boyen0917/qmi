<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Project O</title>
        <link rel="stylesheet" href="../css/jquery.mobile-1.3.2.min.css" />
        <link rel="stylesheet" href="css/main.css" />
        <script src="../js/jquery.js"></script>
        <script src="../js/jquery.mobile-1.3.2.min.js"></script>
    </head>
    <body>
    
        <div data-role="page" id="page-test">
            <a href="#page-group-menu" class="hg-create" data-role="button" data-inline="true">立即創建團體</a>
                <a href="#page-group-menu" class="hg-join" data-role="button" data-inline="true">立即加入團體</a>
                 </div> 
        
        <div data-role="page" id="page-group-menu">
            <div data-theme="c" data-role="header" data-position="fixed" data-tap-toggle="false">
                <a data-role="button" data-rel="back" data-icon="back" data-iconpos="left" class="ui-btn-left">返回</a>
                <h3>團體列表</h3>
                <div id="group-nav-area" data-role="navbar">
                    <ul>        
                        <li><a href="#" data-group-act="gl">團體列表</a></li>
                        <li><a href="#" data-group-act="gc">創建團體</a></li>
                        <li><a href="#" data-group-act="gj">加入團體</a></li>
                        <li><a href="#" data-group-act="gi">團體邀請</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="group-nav-chk" data-group-act="gl">
                團體列表
            </div>
            <div class="group-nav-chk" data-group-act="gc">
                <img class="gm-create-head" src="images/head.png"/>
                <div class="gm-create-content-area">
                    團體名稱
                    <input type="text" id="group-name" placeholder="請輸入您的團體名稱">
                    團體介紹
                    <textarea name="textarea-8" id="group-desc"></textarea>
                    <a href="#" id="gm-create-submit" data-role="button" data-theme="b" >建立</a>
                </div>
                <div data-role="popup" class="popup4" data-transition="pop">
                   <p>團體名稱必填喔！</p>
                 </div>
            </div>
            <div class="group-nav-chk" data-group-act="gj">
            加入團體
            </div>
            <div class="group-nav-chk" data-group-act="gi">
            團體邀請
            </div>
            
        </div>  
        
        <div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon ui-icon-loading"></span><h1>loading</h1></div>
        <script type="text/javascript">
            $(function(){ 
            	var result;
                $("#group-nav-area li a").click(function(){
                	var act = $(this).data("group-act");
                    $(".group-nav-chk").each(function(i,val){
                    	if($(this).data("group-act") == act){
                    		$(this).show();
                    	}else{
                    		$(this).hide();
                    	}
                    });
                });
                
				$(".hg-create").click(function(){
					$(document).ajaxSend(function(r, s) {
				        $('.ui-loader').show();
				    });
					$(document).ajaxStop(function(r, s) {
                        $('.ui-loader').hide();
                    });
					result = ajaxDo();
					console.log(result.responseText);
					return false;
					$("#group-nav-area li a[data-group-act=gc]").trigger("click");
				});
				$(".hg-join").click(function(){
					$("#group-nav-area li a[data-group-act=gj]").trigger("click");
				});
				
				function ajaxDo(){
                    //console.log(api_url);
                    var api_url = "api.php";
                    var myRand = Math.floor((Math.random()*1000)+1);
                    
                    var result = $.ajax ({
	                        url: api_url,
	                        data:{
	                            para: myRand
	                        }
                        });
                    
                    return result;
                }
                        
            });
        </script>
    </body>
</html>
