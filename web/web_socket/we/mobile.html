<!DOCTYPE html>
 <html>
<head>
<meta http-equiv="Content-Type" content="text/html" charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-1.7.2.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript">
$(function(){
    var wsUri = "ws://172.20.10.6:9000/demo/server.php"; 
    var temp_x,temp_y;
    if(!temp_x)temp_x=0;
    if(!temp_y)temp_y=0;
    websocket = new WebSocket(wsUri);
    websocket.onopen = function()
    {
        $("#test").show();
    };
    
    function doSend(x,y,click,reset){
        var position = {
            x: x,
            y: y,
            click:click,
            reset:reset
        };
        //convert and send data to server
        websocket.send(JSON.stringify(position));
    }
	
	
    $( "#test" ).draggable({
        drag: function() {
            var x = $("#test").offset().left-temp_x;
            var y = $("#test").offset().top-temp_y;
            temp_x = $("#test").offset().left;
            temp_y = $("#test").offset().top;
            doSend(x,y,false);
          }
    });
    
    $( "#test" ).click(function(){
    	doSend(temp_x,temp_y,true,false);
    });
    
    $( "#reset" ).click(function(){
        doSend(temp_x,temp_y,false,true);
    });
    
});

</script>
</head>

<body>
        <img id="test" class="ch" src="image/Crosshair.png"/>
        <div id="reset">reset</div>
<style>

.ch{
    width:100px;
    display:none;
}

#reset{
    margin-top:80%;
    width:100px;
    height:30px;
    background:gray;
    text-align:center;
    line-hekght:30px;
}
</style>
</body>
</html>